[Unit]
Description=Lighthouse: Ethereum 2.0 Validator Client
After=syslog.target network.target

[Service]
User={{ ansible_user }}
Type=simple
ExecStart={{ lighthouse_bin }} \
	--debug-level {{ lighthouse_debug_level }} \
	{% if lighthouse_disable_malloc_tuning == True %}
	--disable-malloc-tuning \
	{% endif %}
	--network {{ built_in_testnet_name }} \
	-l \
	validator_client \
	--metrics \
	--init-slashing-protection \
	--metrics-address 0.0.0.0 \
	{% if lighthouse_vc_beacon_nodes != False %}
		--beacon-nodes http://localhost:5052,{{ lighthouse_vc_beacon_nodes }}
	{% else %}
		--beacon-nodes http://localhost:5052
	{% endif %}
KillMode=process
KillSignal=SIGINT
TimeoutStopSec=90
Restart=always
RestartSec=10s
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier={{ lighthouse_validator_systemd_service_name }}
LimitNOFILE=65536:65536

[Install]
WantedBy=multi-user.target

